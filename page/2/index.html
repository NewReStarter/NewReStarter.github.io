<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang>
<head><meta name="generator" content="Hexo 3.9.0">
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta name="description" content="Contact restartercc@gmail.com">
<meta property="og:type" content="website">
<meta property="og:title" content="Restartercc">
<meta property="og:url" content="NewReStarter.github.io/page/2/index.html">
<meta property="og:site_name" content="Restartercc">
<meta property="og:description" content="Contact restartercc@gmail.com">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Restartercc">
<meta name="twitter:description" content="Contact restartercc@gmail.com">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="NewReStarter.github.io/page/2/">





  <title>Restartercc</title><!-- hexo-inject:begin --><!-- hexo-inject:end -->
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Restartercc</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">学习计算机科学和数学，尝试了解这个世界</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="NewReStarter.github.io/2019/10/01/Kaggle-IEEE-CIS-Fraud-Detection-Competition-Solution/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ReStartercc">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Restartercc">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/10/01/Kaggle-IEEE-CIS-Fraud-Detection-Competition-Solution/" itemprop="url">【如何当一名合格的调参侠】Kaggle IEEE-CIS Fraud Detection Competition Solution</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-10-01T15:52:57+08:00">
                2019-10-01
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Data-Science/" itemprop="url" rel="index">
                    <span itemprop="name">Data Science</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Preface"><a href="#Preface" class="headerlink" title="Preface"></a>Preface</h2><p>Although I knew quite a few about kaggle competition before this competition, it is my first attempt to join one of these competition on my own. It turns out that doing it myself is very different from following others comptetition trace and code. This blog is therefore mean to demonstrate the ideas and the procedures of how to achieve a high rank, but also what it is feels like to take part in a data science competition and some tips for beginners like I used to be. <strong>Here beginners means beginner to the competition but not beginners to ML, cuz doing it is really different from knowing how to do it.</strong> </p>
<h2 id="Background"><a href="#Background" class="headerlink" title="Background"></a>Background</h2><h3 id="Target"><a href="#Target" class="headerlink" title="Target"></a>Target</h3><p>The target of the competition is to predict the probability that one transaction is fraud. The training data appear to be binary classification, but since we are asked to give probability, it is more reasonable to identify it as a regression problem at last.</p>
<h3 id="Dataset"><a href="#Dataset" class="headerlink" title="Dataset"></a>Dataset</h3><ul>
<li>Identity - User Info<ul>
<li>id01-id38 - where we can identity who the person is</li>
<li>DeviceType - Andriod etc.</li>
<li>DeviceInfo - </li>
</ul>
</li>
<li>Transaction<ul>
<li>TransactionID</li>
<li>TransactionDT - timedelta from a given reference datetime (not an actual timestamp)</li>
<li>TransactionAmt - transaction payment amount in USD</li>
<li>ProductCD - product code, the product for each transaction</li>
<li>card1-card6 - payment card information, such as card type, card category, issue bank, country, etc.</li>
<li>add1-add2 - address</li>
<li>dist1-dist2 - distance</li>
<li>P/R_emaildomain - purchaser and recipient email domain</li>
<li>C1-C14 - counting</li>
<li>D1-D15 - timedelta</li>
<li>M1-M9 - match</li>
<li>V1-V339 - Vesta engineered rich features</li>
</ul>
</li>
</ul>
<p>It is highly important to read the data description thread provided by the competition organizers in the <strong>discussion section</strong> of each competition. It is impossible to do realiable feature engineering, or even effective exploratory data analysis unless you understand what the dataset is about. Above description is my own understanding. In order to follow my idea better, give a glimpse at the data description thread is critical.</p>
<p>Reference: <a href="https://www.kaggle.com/c/ieee-fraud-detection/discussion/101203#latest-666569" target="_blank" rel="noopener">Data Description</a></p>
<h3 id="Evaluation"><a href="#Evaluation" class="headerlink" title="Evaluation"></a>Evaluation</h3><p>AUC, which is very common in the case of binary classification. The submitted result should base on the local test evaluated by AUC as well.</p>
<h2 id="EDA"><a href="#EDA" class="headerlink" title="EDA"></a>EDA</h2><p>EDA is short for <strong>exploratory data analysis</strong>, where we summarize main characteristics of the dataset and visualize them in order to observe the pattern of data better.</p>
<p>At most of the cases, there will be Kaggle kernel and discussion users who would like to post their EDA result in the <strong>kernel section</strong> of each competition. Just pick one of them to start the competition will save you lots of time. Then the rest is just to adding some EDA of your own. Below is the notebook I pick and the notebook of my own.</p>
<h3 id="EDA-Referred-to"><a href="#EDA-Referred-to" class="headerlink" title="EDA Referred to"></a>EDA Referred to</h3><iframe src="https://nbviewer.jupyter.org/github/NewReStarter/Kaggle-IEEE-CIS-Fraud-Detection-87th-Place-Solution/blob/master/EDA/EDA_referred_to.ipynb" width="830" height="600"></iframe>



<h3 id="EDA-of-my-own"><a href="#EDA-of-my-own" class="headerlink" title="EDA of my own"></a>EDA of my own</h3><iframe src="https://nbviewer.jupyter.org/github/NewReStarter/Kaggle-IEEE-CIS-Fraud-Detection-87th-Place-Solution/blob/master/EDA/EDA_myself.ipynb" width="830" height="600"></iframe>



<h3 id="Some-Conclusions"><a href="#Some-Conclusions" class="headerlink" title="Some Conclusions"></a>Some Conclusions</h3><ol>
<li>It is a time-series dataset and we are asked to use the previous data to predict the future data.</li>
<li>Fraud happens around 3.5% in the sample space</li>
</ol>
<p>Next we proceed to feature engineering, which is the most important part.</p>
<h2 id="Feature-Engineering"><a href="#Feature-Engineering" class="headerlink" title="Feature Engineering"></a>Feature Engineering</h2><h3 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h3><ul>
<li>Count: <em>categorical variable</em>, e.g. card, address</li>
<li>Nunique: <em>categorical variable</em>, e.g. card, address</li>
<li>Shift: concat card1-card6 to construct unqiue id(uid) and find where the uid appears last time, D series</li>
<li>Shift delta time: find delta time between two uid</li>
<li>decomposition: PCA</li>
<li>Feature Crosses: concat high-weighted features in LGB in pairs</li>
<li>NaN: Count Missing Value</li>
<li>Datetime data: year, month, day, hour, weekday</li>
<li>emaildomain</li>
<li>categorical variable labelEncoder</li>
</ul>
<h3 id="A-Few-Things-to-Note"><a href="#A-Few-Things-to-Note" class="headerlink" title="A Few Things to Note"></a>A Few Things to Note</h3><p>There is an underlying fact in the competition, a person who has commited a fraud is very likely to commit a fraud again in the future. Therefore two kinds of shift features is actually very useful to identify Fraudulents.</p>
<p>For categorial data, labelEncoder is also very useful. One-hot are more applicable to those which categories are limited to 3 or 4. For more categories, labelEncoder performs better more often. </p>
<p>We use KFold to do local validation to test if our features work or not. Here, <strong>shuffle</strong> paramters should be False, since it is time-series. Although sometimes we can use some pervious collaries we have concluded based on our own experience, doing the tested of differnent method is necessary. For example, in most cases, PCA outperform SVD, but still experiment should be done in order to verify if the collaries are correct in this new scenario.</p>
<p>During this competition, over 60 experiments have been done to verfiy the efficiency of new features. The experiment traces and results are recorded in the git repository, <strong><a href="https://github.com/NewReStarter/Kaggle-IEEE-CIS-Fraud-Detection-87th-Place-Solution/tree/master/feature_engineering" target="_blank" rel="noopener">feature engineering</a></strong> folder. After reading two log files, you can see the detail of doing FE and how I determine the training set at last.</p>
<p>As mentioned above, I recorded all the experiment output of each test. If I was asked what is the one most important lesson that I have learnt in this competition, that must be <strong>“keep record of previous result in a organized way”</strong>. I have repeatedly doing something at the beginning because I thought I can remember what I have done by my brain. It turns out I might be able to do this, but I cannot summarize all of them by brain or  just one line or two comments in the files.</p>
<h2 id="Paramter-Tuning"><a href="#Paramter-Tuning" class="headerlink" title="Paramter Tuning"></a>Paramter Tuning</h2><p>LightGBM is used in our model. In the section, we introduce the Bayesian optimization to do find hyperparamters. The motivation of Bayesian Optimization is that doing Grid Search and Random Search is impossible when the paramter range is large and the calculation time is long. We have to find a mechanism to inference the best parameters. </p>
<p>The idea of Bayesian opimization follows Bayesian rule.<br>$$<br>P(A|B) = \frac{P(B|A)P(A)}{P(b)}<br>$$<br>It uses GPR(Gaussian Process Regressian) to calculate the posterior probability distribution of first n points to obtain the expectation and SD of each point for every hyperparamters. The mean value displays the weight while SD shows uncertainty. We would choose a point with high mean value and high SD. The detail theory and proof can refer to the reference.</p>
<p>For those who is not interested in math, the code is given below.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">LGB_bayesian</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">    #learning_rate,</span></span></span><br><span class="line"><span class="function"><span class="params">    num_leaves, bagging_fraction, feature_fraction, min_child_weight, min_data_in_leaf, max_depth,</span></span></span><br><span class="line"><span class="function"><span class="params">    reg_alpha, reg_lambda)</span>:</span></span><br><span class="line"></span><br><span class="line">    num_leaves = int(num_leaves)</span><br><span class="line">    min_data_in_leaf = int(min_data_in_leaf)</span><br><span class="line">    max_depth = int(max_depth)</span><br><span class="line">    <span class="keyword">assert</span> type(num_leaves) == int</span><br><span class="line">    <span class="keyword">assert</span> type(min_data_in_leaf) == int</span><br><span class="line">    <span class="keyword">assert</span> type(max_depth) == int</span><br><span class="line"></span><br><span class="line">    params = &#123;</span><br><span class="line">        <span class="string">'num_leaves'</span>: num_leaves,</span><br><span class="line">        <span class="string">'min_data_in_leaf'</span>: min_data_in_leaf,</span><br><span class="line">        <span class="string">'min_child_weight'</span>: min_child_weight,</span><br><span class="line">        <span class="string">'bagging_fraction'</span>: bagging_fraction,</span><br><span class="line">        <span class="string">'feature_fraction'</span>: feature_fraction,</span><br><span class="line">        <span class="comment"># 'learning_rate' : learning_rate,</span></span><br><span class="line">        <span class="string">'max_depth'</span>: max_depth,</span><br><span class="line">        <span class="string">'reg_alpha'</span>: reg_alpha,</span><br><span class="line">        <span class="string">'reg_lambda'</span>: reg_lambda,</span><br><span class="line">        <span class="string">'objective'</span>: <span class="string">'binary'</span>,</span><br><span class="line">        <span class="string">'save_binary'</span>: <span class="literal">True</span>,</span><br><span class="line">        <span class="string">'seed'</span>: <span class="number">1337</span>,</span><br><span class="line">        <span class="string">'feature_fraction_seed'</span>: <span class="number">1337</span>,</span><br><span class="line">        <span class="string">'bagging_seed'</span>: <span class="number">1337</span>,</span><br><span class="line">        <span class="string">'drop_seed'</span>: <span class="number">1337</span>,</span><br><span class="line">        <span class="string">'data_random_seed'</span>: <span class="number">1337</span>,</span><br><span class="line">        <span class="string">'boosting_type'</span>: <span class="string">'gbdt'</span>,</span><br><span class="line">        <span class="string">'verbose'</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="string">'is_unbalance'</span>: <span class="literal">False</span>,</span><br><span class="line">        <span class="string">'boost_from_average'</span>: <span class="literal">True</span>,</span><br><span class="line">        <span class="string">'metric'</span>: <span class="string">'auc'</span>&#125;</span><br><span class="line"></span><br><span class="line">    lgb_sub = sub.copy()</span><br><span class="line">    lgb_sub[<span class="string">'isFraud'</span>] = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> fold_n, (train_index, valid_index) <span class="keyword">in</span> enumerate(folds.split(X)):</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> fold_n == <span class="number">4</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        start_time = time()</span><br><span class="line">        print(<span class="string">'Training on fold &#123;&#125;'</span>.format(fold_n + <span class="number">1</span>))</span><br><span class="line"></span><br><span class="line">        trn_data = lgb.Dataset(X.iloc[train_index], label=y.iloc[train_index])</span><br><span class="line">        val_data = lgb.Dataset(X.iloc[valid_index], label=y.iloc[valid_index])</span><br><span class="line">        clf = lgb.train(params, trn_data, num_boost_round=<span class="number">10000</span>, valid_sets=[val_data], verbose_eval=<span class="number">-1</span>,</span><br><span class="line">                        early_stopping_rounds=<span class="number">500</span>)</span><br><span class="line"></span><br><span class="line">        pred = clf.predict(test_X)</span><br><span class="line"></span><br><span class="line">        lgb_sub[<span class="string">'isFraud'</span>] = lgb_sub[<span class="string">'isFraud'</span>] + pred / (n_fold - <span class="number">1</span>)</span><br><span class="line">        print(<span class="string">'Fold &#123;&#125; finished in &#123;&#125;'</span>.format(fold_n + <span class="number">1</span>, str(datetime.timedelta(seconds=time() - start_time))))</span><br><span class="line"></span><br><span class="line">    test = pd.read_csv(<span class="string">'../temp/test_label.csv'</span>, usecols=[<span class="string">"TransactionID"</span>, <span class="string">"isFraud"</span>], nrows=NROWS)</span><br><span class="line">    df1 = test.merge(lgb_sub, on=<span class="string">"TransactionID"</span>, how=<span class="string">"left"</span>)</span><br><span class="line">    score = roc_auc_score(df1[<span class="string">"isFraud_x"</span>], df1[<span class="string">"isFraud_y"</span>])</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> score</span><br><span class="line"></span><br><span class="line">bounds_LGB = &#123;</span><br><span class="line">    <span class="string">'num_leaves'</span>: (<span class="number">27</span>, <span class="number">500</span>),</span><br><span class="line">    <span class="string">'min_data_in_leaf'</span>: (<span class="number">20</span>, <span class="number">200</span>),</span><br><span class="line">    <span class="string">'bagging_fraction'</span> : (<span class="number">0.1</span>, <span class="number">0.9</span>),</span><br><span class="line">    <span class="string">'feature_fraction'</span> : (<span class="number">0.1</span>, <span class="number">0.9</span>),</span><br><span class="line">    <span class="comment">#'learning_rate': (0.01, 0.3),</span></span><br><span class="line">    <span class="string">'min_child_weight'</span>: (<span class="number">0.00001</span>, <span class="number">0.01</span>),</span><br><span class="line">    <span class="string">'reg_alpha'</span>: (<span class="number">1</span>, <span class="number">2</span>),</span><br><span class="line">    <span class="string">'reg_lambda'</span>: (<span class="number">1</span>, <span class="number">2</span>),</span><br><span class="line">    <span class="string">'max_depth'</span>:(<span class="number">-1</span>,<span class="number">50</span>),</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">LGB_BO = BayesianOptimization(LGB_bayesian, bounds_LGB, random_state=<span class="number">42</span>)</span><br><span class="line">print(LGB_BO.space.keys)</span><br><span class="line">init_points = <span class="number">10</span></span><br><span class="line">n_iter = <span class="number">15</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> warnings.catch_warnings():</span><br><span class="line">    warnings.filterwarnings(<span class="string">'ignore'</span>)</span><br><span class="line">    LGB_BO.maximize(init_points=init_points, n_iter=n_iter, acq=<span class="string">'ucb'</span>, xi=<span class="number">0.0</span>, alpha=<span class="number">1e-6</span>)</span><br></pre></td></tr></table></figure>

<p>Above code is applicable to xgboost, catboost and lightgbm. </p>
<p>Ref:</p>
<p><a href="https://arxiv.org/abs/1807.02811" target="_blank" rel="noopener">A tutorial on Bayesian Optimization</a></p>
<p><a href="https://www.kaggle.com/fayzur/lgb-bayesian-parameters-finding-rank-average" target="_blank" rel="noopener">LGB + Bayesian parameters finding + Rank average</a></p>
<h2 id="Ensemble"><a href="#Ensemble" class="headerlink" title="Ensemble"></a>Ensemble</h2><p>The reason we do ensembling is to avoid overfit. The ensemble strategy is simple this time, we ensemble the result of different random_state, this way we ensure we don’t overfit(in most cases).</p>
<h2 id="GitHub-Repository"><a href="#GitHub-Repository" class="headerlink" title="GitHub Repository"></a>GitHub Repository</h2><p><a href="https://github.com/NewReStarter/Kaggle-IEEE-CIS-Fraud-Detection-87th-Place-Solution" target="_blank" rel="noopener">https://github.com/NewReStarter/Kaggle-IEEE-CIS-Fraud-Detection-87th-Place-Solution</a> </p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="NewReStarter.github.io/2019/09/07/string/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ReStartercc">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Restartercc">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/09/07/string/" itemprop="url">Three Different Ways of Implementng where() in c++ string</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-09-07T00:05:06+08:00">
                2019-09-07
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/fundamental-of-computer-science/" itemprop="url" rel="index">
                    <span itemprop="name">fundamental of computer science</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>I started the idea of writing this passage when I was googling the improvement of KMP while waiting for my kernel to complete and I was impressed that there exists a improvement for real, BM and Sunday. Therefore I decided that I have to study them in the near future for my STL reimplementation project. Also I guess it is great time for me to review KMP after a year. After all, string class is an important part of STL and its design has long been criticised in the c++ community.</p>
<p>Now, let’s get started. This passage is going to be developed as how the history of string matching developed. From brutal force to KMP, then to Boyer-Moore, and finally Sunday.</p>
<h2 id="Brutal-Force"><a href="#Brutal-Force" class="headerlink" title="Brutal Force"></a>Brutal Force</h2><p>The idea of brutal force is simple. It is similar to the idea of Bubble Sort: if the s[i] != p[i], then go back to where this matching started then increase the index by 1 and start again. Below is the code.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">bf</span><span class="params">(<span class="keyword">char</span>[] s, <span class="keyword">char</span>[] p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  lenS = <span class="built_in">strlen</span>(s);</span><br><span class="line">  lenP = <span class="built_in">strlen</span>(p);</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= lenS-lenP; ++i)			<span class="comment">// pruning search so that the impossible part of s is not compared.</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; lenP; ++j)</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="keyword">if</span>(s[i+j] != p[j])</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">if</span>(j == lenP<span class="number">-1</span>)</span><br><span class="line">        <span class="keyword">return</span> i+j;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">-1</span>;				<span class="comment">// does not find the pattern in the string</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Given S of length M and P of length N, the time complexity of brutal force is <strong>O((M-N)N)​</strong>, still square level complexity.</p>
<h2 id="Knuth-Morris-Pratt-KMP"><a href="#Knuth-Morris-Pratt-KMP" class="headerlink" title="Knuth-Morris-Pratt(KMP)"></a>Knuth-Morris-Pratt(KMP)</h2><p>Then we try to develop a better algorithm, which does not require us to go back to the starting index every time the comparison failed. It is intuitive to formulate a better situation, where main string does not go back when there is a mismatch and the pattern string goes back with a smaller step. Either case the complexity becomes lower. In this way, we have the idea of Knuth-Morris-Pratt algorithm. </p>
<p>The idea of KMP is to do partial matching, i.e. we don’t have to go back to the beginning of matching every time we do re-match. By doing this we need to have a prefix table: next.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span>* <span class="title">calculateNext</span><span class="params">(<span class="keyword">char</span>* p, <span class="keyword">int</span>* next)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  next[<span class="number">0</span>] = <span class="number">-1</span>;</span><br><span class="line">  <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">int</span> j = <span class="number">-1</span>;</span><br><span class="line">  <span class="keyword">int</span> len = <span class="built_in">strlen</span>(p);</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">while</span>(i &lt; len)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">if</span>(j == <span class="number">-1</span> || p[i] == p[j])</span><br><span class="line">    &#123;</span><br><span class="line">      ++i;</span><br><span class="line">      ++j;</span><br><span class="line">      next[i] = j;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">      j = next[j]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> kmp(<span class="keyword">char</span>[] s, <span class="keyword">char</span>[] p)</span><br><span class="line">&#123;</span><br><span class="line">  lenS = <span class="built_in">strlen</span>(s);</span><br><span class="line">  lenP = <span class="built_in">strlen</span>(p);</span><br><span class="line">  <span class="keyword">int</span> i,j;</span><br><span class="line">  i = j = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">while</span>(i &lt; lenS &amp;&amp; j &lt; lenP)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">if</span>(j == <span class="number">-1</span> || s[i] == p[j])</span><br><span class="line">    &#123;</span><br><span class="line">      ++i;</span><br><span class="line">      ++j;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">      j = next[j];</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">if</span> (j == lenP)</span><br><span class="line">    <span class="keyword">return</span> i - j;		<span class="comment">// the beginning index</span></span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>In summary, we can be sure that the following statement is valid:</p>
<ol>
<li>When there is a mismatch, pattern can always go back to some index, where the going-back of main string is unnecessary.</li>
<li>When doing string comparison, the more information pattern string gives, the easier computation goes. This can refer to trie tree. The idea is very similar.</li>
<li>The time complexity of KMP algorithm is $O(M+N)$</li>
</ol>
<h2 id="Boyer-Moore-BM"><a href="#Boyer-Moore-BM" class="headerlink" title="Boyer-Moore(BM)"></a>Boyer-Moore(BM)</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">strStr</span><span class="params">(<span class="built_in">string</span>&amp;haystack, <span class="built_in">string</span>&amp;needle)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(needle.empty())<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span>(haystack.empty())<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">return</span> BM_search(haystack,needle);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span>* <span class="title">createSuffix</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span>&amp;p)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span>*right=<span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">256</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">256</span>;i++)right[i]=<span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;(<span class="keyword">int</span>)p.size();i++)right[p[i]]=i;</span><br><span class="line">        <span class="keyword">return</span> right;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">BM_search</span><span class="params">(<span class="built_in">string</span>&amp;s,<span class="built_in">string</span>&amp;p)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> slen=(<span class="keyword">int</span>)s.size();</span><br><span class="line">        <span class="keyword">int</span> plen=(<span class="keyword">int</span>)p.size();</span><br><span class="line">        <span class="keyword">int</span>* right=createSuffix(p);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>,skip;i&lt;=slen-plen;i+=skip)&#123;</span><br><span class="line">            skip=<span class="number">0</span>;<span class="comment">// skip length</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=plen<span class="number">-1</span>;j&gt;=<span class="number">0</span>;j--)&#123;</span><br><span class="line">                <span class="keyword">if</span>(s[i+j]!=p[j])&#123;</span><br><span class="line">                    <span class="keyword">int</span> distance=j-right[s[i+j]]; </span><br><span class="line">                    skip=(distance&gt;<span class="number">1</span>)?distance:<span class="number">1</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(<span class="number">0</span>==skip)<span class="keyword">return</span> i;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h2 id="Sunday"><a href="#Sunday" class="headerlink" title="Sunday"></a>Sunday</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">void GetNext(string &amp; p, int &amp; m, int next[])</span><br><span class="line">&#123;</span><br><span class="line">    for (int i = 0; i &lt; MAX_CHAR; i++)</span><br><span class="line">        next[i] = -1;</span><br><span class="line">    for (int i = 0; i &lt; m; i++)</span><br><span class="line">        next[p[i]] = i;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int Sunday(string &amp; s, int &amp; n, string &amp; p, int &amp; m)</span><br><span class="line">&#123;</span><br><span class="line">    int next[MAX_CHAR];</span><br><span class="line">    GetNext(p, m, next);</span><br><span class="line"></span><br><span class="line">    int j; </span><br><span class="line">    int k;</span><br><span class="line">    int i = 0;</span><br><span class="line">    while (i &lt;= n - m)</span><br><span class="line">    &#123;</span><br><span class="line">        j = i;</span><br><span class="line">        k = 0;</span><br><span class="line">        while (j &lt; n &amp;&amp; k &lt; m &amp;&amp; s[j] == p[k])</span><br><span class="line">            j++, k++;</span><br><span class="line"></span><br><span class="line">        if (k == m)</span><br><span class="line">            return k;</span><br><span class="line"></span><br><span class="line">        if (i + m &lt; n)</span><br><span class="line">            i += (m - next[s[i + m]]);</span><br><span class="line">        else</span><br><span class="line">            return -1;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">    string s, p;</span><br><span class="line">    int n, m;</span><br><span class="line"></span><br><span class="line">    while (cin &gt;&gt; s &gt;&gt; p)</span><br><span class="line">    &#123;</span><br><span class="line">        n = s.size();</span><br><span class="line">        m = p.size();</span><br><span class="line">        Sunday(s, n, p, m);</span><br><span class="line">        cout &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="NewReStarter.github.io/2019/08/28/geopandas/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ReStartercc">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Restartercc">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/08/28/geopandas/" itemprop="url">How to plot a map via GeoPandas</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-08-28T12:57:23+08:00">
                2019-08-28
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>过去半年做了三个geopandas相关的project，因此留用最近的一个进行分享。最近的一个project涉及到使用geopandas（一个加载GIS数据变成DataFrame的python库）求不同区域间交集面积和对求出的交集面积做heatmap的任务。其中交集面积使用geopandas内置的intersection和area求得。GeoPandas加载的GIS数据本质上是一个Polygon类，也就是各个多边形顶点的坐标，按顺序排列，存储在geometry列里，同时有两个或多个geometry列的df无法plot。对于熟悉pandas的人来说，基本不存在学习曲线。GIS数据来自.shp文件，但要注意的是，要加载’.shp’文件，同一文件夹内需包含GIS数据解压后的.prj, .qbj, .shx等文件才能完成加载。但反向将geodataframe输出为csv后再重新加载则不存在文件依赖。另一点值得一提的是当点坐标过大的时候matplotlib不支持子图形式输出（subfigure(1,1)这样可以加入colorbar的形式），界限为x,y均不大于2^16，因此只能使用dataframe内的plot来输出heatmap。stackoverflow上似乎也未提供坐标过大相应的解决办法，具体修改子图大小的方法将在近段时间研究出后更新在博客上。</p>
<iframe src="https://nbviewer.jupyter.org/github/NewReStarter/Training/blob/master/jupyter-demo/green.ipynb" width="830" height="2000"></iframe>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="NewReStarter.github.io/2019/08/27/RAII2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ReStartercc">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Restartercc">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/08/27/RAII2/" itemprop="url">A Deeper Study of RAII</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-08-27T22:34:54+08:00">
                2019-08-27
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/C/" itemprop="url" rel="index">
                    <span itemprop="name">C++</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="Preface"><a href="#Preface" class="headerlink" title="Preface"></a>Preface</h3><p>I just went through a difficult time, emotionally. Therefore I stop the update of my blog for nearly two months. Luckily things have been getting better. I will start regular update from now on. For those who know me in the real world, please keep a close look on me for this.</p>
<h2 id="Introduction-amp-Concepts"><a href="#Introduction-amp-Concepts" class="headerlink" title="Introduction &amp; Concepts"></a>Introduction &amp; Concepts</h2><p>The idea of RAII is raised in order to solve the following problem: when a c++ program throws an exception, resource deallocation, which is expressed after the throwing, may never be executed, and it is a resource leak. This way, to make sure the resource is deallocated(corresponding expressions are executed), the right way to do this is to place a destructor in the same <strong>stack frame</strong>. This way, the destructor must be executed following the mechanism of <strong>stack winding</strong>.</p>
<p>The advantages of RAII therefore can be summarized as:</p>
<ul>
<li>Ensure the deallocation of resource</li>
<li>Skip the redundant and repeating exception handling, which even may not be correct logically and then improve the safe level of the code.</li>
<li>Reduce the code size</li>
</ul>
<h2 id="Application-scenario"><a href="#Application-scenario" class="headerlink" title="Application scenario"></a>Application scenario</h2><h3 id="1-File-Handling-Operation"><a href="#1-File-Handling-Operation" class="headerlink" title="1. File Handling Operation"></a>1. File Handling Operation</h3><p>RAII can be used to encapsulate a exceptional-safe file class for file operation.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">Potentially, there can be a more thothrough study on C++ NonCopyable</span></span><br><span class="line"><span class="comment">**/</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NonCopyable</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  NonCopyable();</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">  NonCopyable(NonCopyable <span class="keyword">const</span> &amp;);  <span class="comment">// private copy constructor</span></span><br><span class="line">  NonCopyable&amp; <span class="keyword">operator</span>=(NonCopyable Const &amp;) <span class="comment">// private assignment operator</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SafeFile</span>:</span>NonCopyable&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  SafeFile(<span class="keyword">const</span> <span class="keyword">char</span>* filename): fileHandler(fopen(filename, <span class="string">"w+"</span>))&#123;</span><br><span class="line">    <span class="keyword">if</span>(fileHandler == <span class="literal">nullptr</span>)&#123;</span><br><span class="line">      <span class="keyword">throw</span> runtime_error(<span class="string">"fopen"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  ~SafeFile() &#123;fclose(fileHandler);&#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">write</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span>* str)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">fputs</span>(str, fileHandler) == EOF)</span><br><span class="line">    &#123;<span class="keyword">throw</span> runtime_error(<span class="string">"fputs"</span>); &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">write</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span>* buffer, <span class="keyword">size_t</span> num)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (num != <span class="number">0</span> &amp;&amp; fwrite(buffer,num,<span class="number">1</span>,fileHandler) == <span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">throw</span> runtime_error(<span class="string">"fwrite"</span>);</span><br><span class="line">     &#125;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">  FILE *fileHandler;</span><br><span class="line">  SafeFile(<span class="keyword">const</span> SafeFile&amp;);</span><br><span class="line">  SafeFile &amp;amp;<span class="keyword">operator</span> =(<span class="keyword">const</span> SafeFile&amp;);    </span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">func</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="function">SafeFile <span class="title">safeFile</span><span class="params">(<span class="string">"foo.test"</span>)</span></span>;</span><br><span class="line">  safeFile.write(<span class="string">"test RAII"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Note:</p>
<p>The copy constructor and assignment operator is made private due to this operation is done via a private inheritance class, making these two operation meaningless here.</p>
<p>In Java, it is unknown when the object will be destroyed, therefore try-finally is more friendly there.</p>
<h3 id="2-Smart-Pointer"><a href="#2-Smart-Pointer" class="headerlink" title="2. Smart Pointer"></a>2. Smart Pointer</h3><p>Here we have a more complicated example where we use RAII mechanism to simulate smart pointer. What we are going to do is to re-implement a <strong>*</strong> operator in a RAII class and return the pointer it is stored.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Pointer</span>&#123;</span></span><br><span class="line">		Resource* p1;</span><br><span class="line">  	Resource* p2;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  	Pointer(): p1(<span class="keyword">new</span> Resource()), p2(<span class="keyword">new</span> Resource())&#123;&#125;</span><br><span class="line">  	</span><br><span class="line">  	Pointer(<span class="keyword">const</span> Pointer&amp;amp; other):</span><br><span class="line">  		p1(<span class="keyword">new</span> Resource(*other.p1)),</span><br><span class="line">  		p2(<span class="keyword">new</span> Resource(*other.p2)) &#123;&#125;</span><br><span class="line">  	</span><br><span class="line">  	Pointer&amp; <span class="keyword">operator</span>=(<span class="keyword">const</span> Pointer&amp; other)</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">this</span> == &amp;other)</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">      </span><br><span class="line">      *p1 = *other.p1;</span><br><span class="line">      *p2 = *other.p2;</span><br><span class="line">      <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  	</span><br><span class="line">  	~Pointer()</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="keyword">delete</span> p1;</span><br><span class="line">      <span class="keyword">delete</span> p2;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>Suppose we have an expection when we fail to construct a <strong>Resource</strong>, when the resouces p1 points to is initialized but p2 fails, the construction of <strong>Pointer</strong> will fail. Then what p1 points to may face memory leaks. Therefore we have to introduce RAII now.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RAII</span> &#123;</span></span><br><span class="line">  T* p_;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  explicit RAII(T* p) : p_(p) &#123;&#125;</span><br><span class="line"></span><br><span class="line">  ~RAII() &#123; <span class="keyword">delete</span> p_; &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">reset</span><span class="params">(T* p)</span> </span>&#123; <span class="keyword">delete</span> p_; p_=p; &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function">T* <span class="title">get</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123; <span class="keyword">return</span> p_; &#125;</span><br><span class="line"></span><br><span class="line">  T&amp; <span class="keyword">operator</span>*() <span class="keyword">const</span> &#123; <span class="keyword">return</span> *p_; &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">swap</span><span class="params">(RAII&amp; other)</span> </span>&#123; <span class="built_in">std</span>::swap(p_,other.p_); &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">  RAII(<span class="keyword">const</span> RAII&amp; other);</span><br><span class="line">  RAII&amp; <span class="keyword">operator</span>=(<span class="keyword">const</span> RAII&amp; other);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Pointer</span> &#123;</span></span><br><span class="line">  RAII p_;</span><br><span class="line">  RAII p2_;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  Pointer() :</span><br><span class="line">    p_(<span class="keyword">new</span> Resource()),</span><br><span class="line">    p2_(<span class="keyword">new</span> Resource()) &#123;&#125;</span><br><span class="line"></span><br><span class="line">  Pointer(<span class="keyword">const</span> Pointer&amp; other)</span><br><span class="line">    : p1(<span class="keyword">new</span> Resource(*other.p1)),</span><br><span class="line">      p2(<span class="keyword">new</span> Resource(*other.p2)) &#123;&#125;</span><br><span class="line"></span><br><span class="line">  Pointer&amp; <span class="keyword">operator</span>=(<span class="keyword">const</span> Pointer&amp; other) &#123;</span><br><span class="line">    <span class="comment">// self assignment?</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span> == &amp;other) <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line"></span><br><span class="line">    *p1=*other.p1;</span><br><span class="line">    *p2=*other.p2;</span><br><span class="line">    <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  ~Pointer() &#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Deleting Example, freeing SomeResource!/n"</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>Now even when p1 succeed and p2 failed, stack winding will still make sure the every resource p1 pointes to is deallocated. In fact, in our new Pointer class, destructor seems not to be needed, because RAII helps take care of all the resource management. It is like <strong>auto_ptr</strong>. <strong>auto_ptr</strong> part may also be discussed in the future blogs.</p>
<h3 id="3-Lock"><a href="#3-Lock" class="headerlink" title="3. Lock"></a>3. Lock</h3><p>The situation in the lock operation, specifically, mutex, is very much same. Resources locked by the mutex may fail to be released due to exceptions. By using RAII, it goes away because the stack winding makes sure the encapsulated destructor is executed and the mutex is unlocked.(Sorry I have to mention this three times.)</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> counter = <span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span>* <span class="title">routine</span><span class="params">(<span class="keyword">void</span> *ptr)</span></span>;</span><br><span class="line"><span class="keyword">pthread_mutex_t</span> mutex = PTHREAD_MUTEX_INITIALIZER;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NonCopyable</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    NonCopyable() &#123;&#125;;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    NonCopyable (NonCopyable <span class="keyword">const</span> &amp;); <span class="comment">// private copy constructor</span></span><br><span class="line">    NonCopyable &amp; <span class="keyword">operator</span> = (NonCopyable <span class="keyword">const</span> &amp;); <span class="comment">// private assignment operator</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ScopeMutex</span>:</span>NonCopyable &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    ScopeMutex(<span class="keyword">pthread_mutex_t</span>* mutex):mutex_(mutex)&#123;</span><br><span class="line">        pthread_mutex_lock( mutex_ );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ~ScopeMutex() &#123;</span><br><span class="line">        pthread_mutex_unlock( mutex_ );</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">pthread_mutex_t</span> *mutex_;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> rc1, rc2;</span><br><span class="line">    <span class="keyword">pthread_t</span> thread1, thread2;</span><br><span class="line">    <span class="keyword">if</span>((rc1=pthread_create(&amp;thread1, <span class="literal">NULL</span>, routine, <span class="literal">NULL</span>))) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Thread creation failed: %d/n"</span>, rc1);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>((rc2=pthread_create(&amp;thread2, <span class="literal">NULL</span>, routine, <span class="literal">NULL</span>))) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Thread creation failed: %d/n"</span>, rc1);</span><br><span class="line">    &#125;</span><br><span class="line">    pthread_join(thread1, <span class="literal">NULL</span>);</span><br><span class="line">    pthread_join(thread2, <span class="literal">NULL</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span>* <span class="title">routine</span><span class="params">(<span class="keyword">void</span> *ptr)</span> </span>&#123;</span><br><span class="line">    <span class="function">ScopeMutex <span class="title">scopeMutex</span><span class="params">(&amp;mutex)</span></span>;</span><br><span class="line">    counter++;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d/n"</span>,counter);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Disadvantages"><a href="#Disadvantages" class="headerlink" title="Disadvantages"></a>Disadvantages</h2><p>Some operations that can throw exceptions. If they are put into destructor, error message cannot be passed outside, then destructor has to deal with the exceptions, which can be painful sometimes.</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p>*”Programming with Exceptions”* by Bjarne Stroustrup, 2001, <a href="http://www.informit.com/articles/printerfriendly/21084" target="_blank" rel="noopener">http://www.informit.com/articles/printerfriendly/21084</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="NewReStarter.github.io/2019/07/18/Evernote-Reading-Notes/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ReStartercc">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Restartercc">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/18/Evernote-Reading-Notes/" itemprop="url">The C++ Programming Language Reading Note</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-07-18T13:36:55+08:00">
                2019-07-18
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Reading-Note/" itemprop="url" rel="index">
                    <span itemprop="name">Reading Note</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>The note is written with Evernote and will keep updateing recently while I am reviewing and learning c++. Basically it is a brief summary(also involves in personal extensions) divided on chapter-based. Contents are available via the below linked. Some of them is unfinished or omitted due to personal knowledge. Hope it will be useful. :D</p>
<p><a href="https://www.evernote.com/pub/ziliugao/thecprogramminglanguage" target="_blank" rel="noopener">https://www.evernote.com/pub/ziliugao/thecprogramminglanguage</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="NewReStarter.github.io/2019/07/10/testmath/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ReStartercc">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Restartercc">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/10/testmath/" itemprop="url">mathjax notation</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-07-10T13:01:25+08:00">
                2019-07-10
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Simple inline $a = b + c$.</p>
<p>$$\frac{\partial u}{\partial t}<br>= h^2 \left( \frac{\partial^2 u}{\partial x^2} +<br>\frac{\partial^2 u}{\partial y^2} +<br>\frac{\partial^2 u}{\partial z^2}\right)$$</p>
<p>$$<br>\left[<br>    \begin{array}{cc|c}<br>      1&amp;2&amp;3\newline<br>      4&amp;5&amp;6<br>    \end{array}<br>\right]<br>$$</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="NewReStarter.github.io/2019/07/04/RAII/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ReStartercc">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Restartercc">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/04/RAII/" itemprop="url">A Brief Summary of C++ RAII</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-07-04T15:11:09+08:00">
                2019-07-04
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/C/" itemprop="url" rel="index">
                    <span itemprop="name">C++</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>RAII</strong> stands for resource acquisition is initialization. This makes no sense literally when it stands alone. It is de facto saying resource allocation(acquisition) is done when it is initialized, by the constructor, and the resource deallocation is done when the object is destructed, by the destructor. It is used to describe the resource change along object lifetime. This is used to make sure there is no resource leaks.</p>
<p><strong>Resource leak</strong>, often refers to the resources acquired by the program is not released after its lifetime. Typical resource leak comes up my mind is memory leak, while wiki indicates handle leak is more common. Threads, sockets and etc. are also included.  Note that RAII is not suitable for resources that cannot be acquired before using, including CPU time, bandwidth, stack memory and etc.</p>
<h2 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;mutex&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="built_in">std</span>::mutex mtx;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">nake_bad</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  mtx.lock();</span><br><span class="line">  f();</span><br><span class="line">  <span class="keyword">if</span>(!everything_ok()) <span class="keyword">return</span>;</span><br><span class="line">  mtx.unlock();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// though there might be some logical error</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">nake_good</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  mtx.lock();</span><br><span class="line">  f();</span><br><span class="line">  mtx.unlock();</span><br><span class="line">  <span class="keyword">if</span>(!everything_ok()) <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">good</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="built_in">std</span>::lock_guard&lt;<span class="built_in">std</span>::mutex&gt; lck(mtx);</span><br><span class="line">  f();</span><br><span class="line">  <span class="keyword">if</span>(!everything_ok()) <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Clearly when the program exit the scope of the good() function, the mutex is released again. This eliminated the risk of resource leak and guarantee exception safety. In a word, life time of RAII objects end when the scope exits.</p>
<h2 id="Feature"><a href="#Feature" class="headerlink" title="Feature"></a>Feature</h2><ul>
<li><p>encapsulate each resource into a class where</p>
<ul>
<li>the constructor acquire the resource and establishes all class invariants or throws an exception if that cannot be done</li>
<li>the destructor releases the resource and never throw exception.  </li>
</ul>
</li>
<li><p>always use the resource via an instance of a RAII-class that either</p>
<ul>
<li>has automatic storage duartion or temporary lifetime itself or,</li>
<li>has lifetime that bounded by the lifetime of an automatic or temporary object.</li>
</ul>
</li>
</ul>
<p>Classes with open()/close(), lock()/unlock() or init()/copyFrom()/destroy() member functions are non-RAII function.</p>
<ul>
<li>To manage dynamically-allocated memory, when you need to manage a specifc resource and the semantic requirements include pointer, use <strong>std::unique_ptr</strong> and <strong>std::shared_ptr</strong></li>
<li>To manage mutexes, use <strong>std::lock_guard</strong>,<strong>std::unique_lock</strong> and <strong>std::shared_lock</strong></li>
</ul>
<h2 id="Future-work"><a href="#Future-work" class="headerlink" title="Future work"></a>Future work</h2><p>Limitation, usage and other memory management and their pros and cons are not covered in the passage due to the time constraint today. Later this month I will write a deeper blog on three way of memory management of programming language and the implementation details.</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p>[1] Wiki RAII <a href="https://en.wikipedia.org/wiki/Resource_acquisition_is_initialization" target="_blank" rel="noopener">https://en.wikipedia.org/wiki/Resource_acquisition_is_initialization</a></p>
<p>[2] CPP Reference <a href="https://en.cppreference.com/w/cpp/language/raii" target="_blank" rel="noopener">https://en.cppreference.com/w/cpp/language/raii</a></p>
<p>[3] <em>The C++ Programming Language 4th Edition</em> Chapter 5 Concurrency</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="NewReStarter.github.io/2019/06/18/Python-DAG-Visualization/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ReStartercc">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Restartercc">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/06/18/Python-DAG-Visualization/" itemprop="url">Python Network Visualization</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-06-18T20:15:57+08:00">
                2019-06-18
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Intro"><a href="#Intro" class="headerlink" title="Intro"></a>Intro</h2><p>Recently I encountered serveral situations where data visualzation of network or  directed graph is required. This bothered me so much that I finally decided to write this blog to aviod repeated googling every time I need to use this. I guess it can also server as a study reference for those who is not familiar with this topic.</p>
<h2 id="Demo-notebook"><a href="#Demo-notebook" class="headerlink" title="Demo notebook"></a>Demo notebook</h2><iframe src="https://nbviewer.jupyter.org/github/NewReStarter/Training/blob/master/jupyter-demo/Network_Visualization.ipynb" width="830" height="600"></iframe>


<h2 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h2><p>The documentation of networkx seems to be a bit confusing since my original idea is that inter-change of object can be down between these two library but in the end I find the object cast can only be done via additional scripts handling these. Yet at the end the tranformation is feasible. Networkx is an ideal python library for graph operation is for sure. Maybe next blog will be about networkx in depth.</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="NewReStarter.github.io/2019/01/01/career/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ReStartercc">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Restartercc">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/01/career/" itemprop="url">人生就像一条衔尾蛇</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-01-01T23:07:19+08:00">
                2019-01-01
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="1-人生就像一条衔尾蛇"><a href="#1-人生就像一条衔尾蛇" class="headerlink" title="1 人生就像一条衔尾蛇"></a>1 人生就像一条衔尾蛇</h2><p>两年前的夏天，我在从Berkeley回来的第一天晚上，给我的老板陈聪发出了第一封approaching letter，希望接纳我做他的RA，从此开始了接近1年半的全职研究；两个月前，同样的位置同样的电脑，我发出了我第一封接受全职offer的邮件，决定在毕业后加入腾讯，不做算法做开发。</p>
<p>在过去的三年里，我的兴趣从开发转到了做研究最后又想做回了开发。包括让我defer一年的数学学位很大程度只是想帮助我在申请上有一个更好的背景，有更好的数理基础，在申请上他的效果也的确反映出来了。虽然我最后也没有继续我的学术路，但数学课提供的数理工具和思维模式即使在找工作上也给了我很大的帮助。虽然获得这样的工具和思维模式也许只需要学好微积分线性代数概率这老三样和优化理论和博弈论，但总算可能勉强说一句，最后一年没有虚度。</p>
<p><em>也许现阶段还不存在弯路还是直路，因为没有明确的要去优化的目标函数</em></p>
<p>从最开始转CS，因为湾区吸引人的收入想去美国读个水硕成为一个SWE；到后来想读phd，为拓宽人类认知的边界做一点小小的贡献，再到想做开发参与制作有用的产品。我的大学生活就仿佛一条衔尾蛇，最后又回到了最开始的原点。</p>
<p>或许荣格的理论很反应现实，人类心理的圆形就是一条循环的衔尾蛇</p>
<h2 id="2-春招二三事"><a href="#2-春招二三事" class="headerlink" title="2 春招二三事"></a>2 春招二三事</h2><p>大概是1月初在家的时候，大概是自己的学术路让人感到很挫败，在等申请结果的同时，想尝试着找一下工业界的职位，于是就开始高强度准备笔试和面试。最开始一头雾水，在CSDN和牛客上看了很多面经，感觉面试的知识点也就分成几大类，当时的我基本处于懵逼状态，TCP为什么要三次握手四次挥手都不知道，算法也基本处于完全遗忘状态（就是吐槽我校cs教育的意思）。我给自己计划了一下刷题和复习计划，先刷1周leetcode，后面按大纲逐步复习。</p>
<p>必考点和对应的复习基本可以分为：</p>
<ul>
<li>一门工作使用的语言<ul>
<li>The C++ Programming Language</li>
<li>Effective Modern C++</li>
<li>STL 源码解析</li>
<li>牛客面经问题</li>
</ul>
</li>
<li>一门脚本语言<ul>
<li>牛客面经问题</li>
</ul>
</li>
<li>算法/数据结构<ul>
<li>LeetCode 前200题</li>
</ul>
</li>
<li>操作系统<ul>
<li>牛客面经问题</li>
</ul>
</li>
<li>计算机网络<ul>
<li>TCP/IP 协议详解卷一</li>
</ul>
</li>
<li>数据库原理<ul>
<li>牛客面经问题</li>
</ul>
</li>
<li>设计模式<ul>
<li>牛客面经问题</li>
</ul>
</li>
<li>智力题</li>
</ul>
<p>写在简历上加分，写了就会考的：</p>
<ul>
<li>机器学习<ul>
<li>PRML</li>
</ul>
</li>
<li>数学（大家都喜欢考概率论）</li>
<li>分布式系统<ul>
<li>MIT 6.824 Lab 1 2</li>
<li>极客时间分布式系统课程</li>
<li>面经</li>
</ul>
</li>
<li>安全<ul>
<li>完全不会</li>
</ul>
</li>
</ul>
<p>实际上即使我认为我原来还有相对过关的算法数据结构基础，我全心全意刷题的时间大概也花了Catch up大概花了两周，比我预期的进度慢了很多，以至于我最后脱产了一周没有上课，追赶计划里规划在后面的东西。</p>
<h4 id="几个Tips"><a href="#几个Tips" class="headerlink" title="几个Tips"></a>几个Tips</h4><p>在准备前我先贯彻了<strong>一切考试都可以面向考试准备</strong>，几大类知识体系下笔试、面试题目重复度实在太高了，本质的考点就那几部分，完全可以通过面经，遇到不懂就google来面向面经学习。最后呈现的效果也比较出色。</p>
<p>当然<strong>考试就需要练习，海投很有必要</strong>。我在前几次的笔试/面试中发挥都很糟糕，莫名其妙地很紧张、不能识别出被问到问题的实质etc. 这样看国外流行的mock interview确实挺有用的，但在大概失败了三四次后我基本就能顺利通过大部分的笔试了，那几家开始并不看的上眼的公司确实为我提供了很多宝贵的面试和笔试经验，也端正了我的态度，认真对待每一个公司和机会。</p>
<p><strong>讲好故事很重要</strong>。有经历当然是最重要的，但经历的呈现也很重要，一个好的故事可以为自己加不少分。当然可能是因为我打了四年辩论吧，最后还是变成了自己最不喜欢的说服型选手。</p>
<p>对于我们这样的ddl fighter来说，虽然是老生常谈，<strong>为自己留出充分的时间</strong>对于找工作来说也是很重要的。没参加秋招不仅错过了很多工作的机会（春招的open position 和 HC 往往更少），还失去3个月多的准备时间。</p>
<p>但话又说话来，<strong>种一棵树最好的时间是十年前，其次是现在</strong>。我也从一头雾水从零开始找到了满意的工作，相信正在阅读这篇博客的潜在求职者们也可以。</p>
<h4 id="经过"><a href="#经过" class="headerlink" title="经过"></a>经过</h4><p>据不完全统计，我大概投递了以下这些公司，分时间先后，分别收到了以下结果。</p>
<ul>
<li>腾讯<ul>
<li>TEG offerred</li>
</ul>
</li>
<li>网易雷火<ul>
<li>4小时笔试太长，没考</li>
</ul>
</li>
<li>华为<ul>
<li>笔试挂，第一次笔试，考试策略有点问题</li>
</ul>
</li>
<li>字节提前批<ul>
<li>一面挂，面试呈现过差</li>
</ul>
</li>
<li>百度<ul>
<li>paddle 深度学习算法工程师 offerred</li>
<li>说实话百度我投的C++，莫名其妙给我调剂去了算法岗，我这样没publication的居然神仙打架的算法岗也能过，惊呆了。</li>
</ul>
</li>
<li>阿里<ul>
<li>阿里春招不招应届生！血泪，笔试没有直接挂</li>
</ul>
</li>
<li>Bilibili<ul>
<li>找人内推后杳无音信…</li>
</ul>
</li>
<li>Shopee<ul>
<li>笔试过，1面挂</li>
</ul>
</li>
<li>Microsoft<ul>
<li>杳无音信</li>
</ul>
</li>
<li>小红书<ul>
<li>笔试过，2面挂</li>
</ul>
</li>
<li>蘑菇街<ul>
<li>简历挂，说实话没懂……</li>
</ul>
</li>
<li>字节跳动<ul>
<li>上海创新业务 offered</li>
<li>宇宙条真是时刻招人，光笔试邀请就给我发了3次，respect</li>
</ul>
</li>
<li>招银金融科技<ul>
<li>笔试AK了没给面试……</li>
</ul>
</li>
<li>网易杭研院<ul>
<li>笔试3题A2题后杳无音信</li>
</ul>
</li>
<li>37互娱<ul>
<li>简历挂</li>
</ul>
</li>
<li>美团<ul>
<li>小象事业群 offered</li>
</ul>
</li>
<li>爱奇艺<ul>
<li>杳无音信</li>
</ul>
</li>
</ul>
<p>除了国内的岗位外，还投了香港两家做自动交易的</p>
<ul>
<li>Optiver<ul>
<li>Offerred</li>
</ul>
</li>
<li>Ecilpse Trading<ul>
<li>No HC</li>
</ul>
</li>
</ul>
<h2 id="3-有技术追求的人应该去挑战那些崇山峻岭"><a href="#3-有技术追求的人应该去挑战那些崇山峻岭" class="headerlink" title="3 有技术追求的人应该去挑战那些崇山峻岭"></a>3 有技术追求的人应该去挑战那些崇山峻岭</h2><p>上周看到的绿盟沈沉舟的一句话，“有技术追求的人应该去挑战那些崇山峻岭” ，我相信我们学理工科的的人（至少我认识的）一部分内心都是有希望做出实现不可能，比现在更进一步的某种程度上的英雄主义情怀的。这句话的内核很大程度决定了我对offer的取舍。</p>
<p>最后还是没有选择留在香港。说实话Optiver给的package很高，甚至是我第一个拿到的offer，但可能是我相信更好的技术氛围和工程师文化才是我所向往的；也可能是阿兰段学长三年前在朗豪坊顶楼的一番话记忆太深刻了，加上我在香港实习一年后观察到的工作文化，”不要在金融公司做tech，也不要在tech company做金融”；也因为19年下半年我个人对香港社会的失望；或者说前面的本质都和我在疫情开始时，下定的决心一样， “接下来五年，去工业界就要能参与制作对社会有意义的产品”。</p>
<p>在拿到鹅厂offer的时候，我几乎没有考虑，甚至没有问薪水，就接下了这个offer。在人生中许多的选择时刻，在我有独自决定的能力后，我都听从了我的直觉，直觉的选择一定是内心最喜欢的，不选以后会后悔的。在直觉里，我应该去这里。我喜欢TEG对技术的追求和沉淀，喜欢崭新的从未接触的挑战，喜欢鹅厂的文化。</p>
<p>有一个小故事，在我鹅厂的第二轮面试时，出了一道智力题。大概是把一个东西从一个地方运到另一个地方，中途每单位路程有损耗，车有最大装载量，问怎么运效率最高。我大概思考了五分钟后把他转换成了通过中途车站位置完成约束的优化问题，然后通过发现是一个线性规划，直接画图解出了最优解。面试官说跟我讨论了一下类似的优化原则，说实话其他大厂的智商题我也做了，大多数都属于pigeon hole的变种和划分类的变种，本质有点脑筋急转弯，但我第一次遇到和我讨论了转化为优化问题思路对这类问题的可行性，又展开聊了下里面非凸转凸的部分，这是我第一次面试的时候完全没考虑通过与否的问题，就像和朋友聊天聊到技术问题一样。可能所谓喜欢的公司文化，就是这样的交流吧。</p>
<p>Anyway，brand new start of my journey start here，希望我在五年后，也能说我挑战过了技术的崇山峻岭吧。18年9月，第一次求职，拒绝了鹅厂的offer选择了继续读书，最后当我决定不读书了以后，又回到最开始的地方。人生真像一条衔尾蛇。</p>
<h2 id="4-世事如棋不忍看，雄心散漫白云端"><a href="#4-世事如棋不忍看，雄心散漫白云端" class="headerlink" title="4. 世事如棋不忍看，雄心散漫白云端"></a>4. 世事如棋不忍看，雄心散漫白云端</h2><p>考完这学期的7门期末考试到现在的1个月里，我基本什么正事都没做处于放空的状态。回想一下，过去9个月的风云变幻大概是比我过去19年最大的风浪都大的，因此本来准备开的讨论坑有很多，白天因为在老家无聊，又把《大问题》翻出来看了看，再读又和三年前感受不同，但其实politiscale下政治光谱并没有变化许多。所谓的国家与社会、道德与正义、自由与秩序无非是大问题中那一个个的元问题，无关对错，只有关立场，无关对错，这些问题已经被反复讨论了，又没有什么兴致了，世界的严肃讨论不值得人类反复做。</p>
<p>最后在我大学的末尾，似乎就“成长”这个主题，应该且值的被提及，它关系的元问题是本我。在我反复横跳的大学生涯里，我也自己怀疑过我是否是一条路走了一半又走了回去，最后一年的学费等于白交，三分钟热度。外观性上可能最后殊途同归，内省却已然是不同的认知水平。一切的路都不会白走，就像我在智商题里用的优化理论一样，可能用脑筋急转弯和背套路的方法也可以做，但用体系的思维去思考和解析，才会真的安心，包括对于很多决策的实施，可能先后一样，但做出判断的思维途径已经不同了。我走过的路已经提升我对世界的认知水平，类似看山是山与看山还是山，同样的决策在更高的认知水平下，也会有更好的outcome，认知水平的提升即是成长，无论对错，也许其他路可能更快，可能此刻结果相同，但这条路也有多看风景。</p>
<h2 id="5-致谢"><a href="#5-致谢" class="headerlink" title="5. 致谢"></a>5. 致谢</h2><p>感谢我的父母，作为我的投资人，允许我反复横跳，尝试我想尝试的人生道路。</p>
<p>感谢我的前老板陈聪，在10月论文被reject后依然帮我networking，帮助我获得了NTU的PhD，是我在学术路上的role model，我觉得并没有live up to your expectation，但你给我展现了为什么要做有意义的问题而不做最火的问题的答案。</p>
<p>感谢我NTU的高丛教授对我的录取，很遗憾最后不能在你的指导下完成4年研究生涯</p>
<p>感谢 李哥、戴小姐、阿兰段在我求职路上给我的内推、工作机会介绍和就业指引</p>
<p>感谢 潜力比特 的合伙人们让我在求职阶段有树洞给压力，提供了丰富的资源支持的求职期点外卖的经费</p>
<p>感谢 李群代数研讨会 的群友互相捧杀，在我自闭的时候让我有聊天的机会</p>
<p>感谢 x月的快乐酒局 提供了三个月的快乐酒局，在生活不顺利时有酒可喝</p>
<p>感谢这学期和我8门同修的课友们，特别是hpy，在我脱产期作业可以凯瑞我，让我顺利毕业</p>
<p>感谢 我的两位前任室友在我香港革命水深火热期间提供精神支持</p>
<p>感谢读完的各位</p>
<p>Have a great day</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">ReStartercc</p>
              <p class="site-description motion-element" itemprop="description">Contact restartercc@gmail.com</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">19</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">6</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">27</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ReStartercc</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config("");
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="custom_mathjax_source">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->
  


  

  

</body>
</html>
